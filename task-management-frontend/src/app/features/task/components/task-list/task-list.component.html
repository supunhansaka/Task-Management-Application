<div class="task-list-header">
    <input
      type="text"
      placeholder="Filter tasks"
      [formControl]="filterControl"
    />
    <button (click)="toggleSort()">Sort {{ sortAscending ? '▲' : '▼' }}</button>
  </div>
  
  <ul class="task-list">
    <li *ngFor="let task of filteredTasks">
      <div>
        <strong>{{ task.title }}</strong> - {{ task.description }}<br />
        <small>Status: {{ task.status }} | Priority: {{ task.priority }} | Due: {{ task.dueDate | date }}</small>
      </div>
    
      <button (click)="onEdit(task)">Edit</button>
    
      <ng-container>
        <button *ngIf="task.status === 'Open' || task.status === 'InProgress'" (click)="markAsCompleted(task.id)">
          Mark as Completed
        </button>
        <span *ngIf="task.status === 'Completed'">✅ Completed</span>
      </ng-container>      
      <button (click)="deleteTask(task.id)">Delete</button>
    </li>
  </ul>

  <div class="pagination">
    <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">Previous</button>
    <span>Page {{ currentPage }}</span>
    <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage * pageSize >= totalCount">Next</button>
  </div>

  